<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>X+ 约课系统 - 个人资料</title>
    <meta name="keywords" content="H+后台主题,后台bootstrap框架,会员中心主题,后台HTML,响应式后台">
    <meta name="description" content="H+是一个完全响应式，基于Bootstrap3最新版本开发的扁平化主题，她采用了主流的左右两栏式布局，使用了Html5+CSS3等现代技术">

    <link rel="shortcut icon" href="../../static/favicon.ico" th:href="@{/static/favicon.ico}">
    <link href="../../static/css/bootstrap.min.css?v=3.3.6" th:href="@{/static/css/bootstrap.min.css(v='3.3.6')}" rel="stylesheet">
    <link href="../../static/css/font-awesome.css?v=4.4.0" th:href="@{/static/css/font-awesome.css(v='4.4.0')}" rel="stylesheet">
    <link href="../../static/css/animate.css" th:href="@{/static/css/animate.css}" rel="stylesheet">
    <link href="../../static/css/style.css?v=4.1.0" th:href="@{/static/css/style.css(v='4.1.0')}" rel="stylesheet">
    <!-- bootstrap-datepicker -->
    <link href="../../static/css/plugins/datapicker/datepicker3.css" th:href="@{/static/css/plugins/datapicker/datepicker3.css}" rel="stylesheet">

</head>

<body class="gray-bg">
<div class="wrapper wrapper-content">
    <div class="row animated fadeInRight">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>新增与流失人数统计</h5>

                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <form id="addForm" method="post" class="form-horizontal" th:action="@{/employee/teacherAdd.do}" >
                            <div class="form-group">
                                <label class="col-sm-2 control-label">统计时段</label>
                                <div class="col-sm-10">
                                    <label class="radio-inline">
                                        <input type="radio" name="unit" value="1" checked > 月
                                    </label>
                                    <label class="radio-inline">
                                        <input type="radio" name="unit" value="2" > 季
                                    </label>
                                    <label class="radio-inline">
                                        <input type="radio" name="unit" value="3" > 年
                                    </label>
                                </div>
                            </div>
                            <div class="form-group"  id="div_month1">
                                <label class="col-sm-2 control-label">开始年份</label>
                                <div class="col-sm-2">
                                    <select class="single-line form-control" name="beginDate" >
                                        <option value="">2020</option>
                                        <option value="">2019</option>
                                        <option value="">2018</option>
                                        <option value="">2017</option>
                                        <option value="">2016</option>
                                    </select>
                                </div>
                                <label class="col-sm-2 control-label">开始月份</label>
                                <div class="col-sm-2">
                                    <select class="form-control" name="beginMonth" >
                                        <option value="">1</option>
                                        <option value="">2</option>
                                        <option value="">3</option>
                                        <option value="">4</option>
                                        <option value="">5</option>
                                        <option value="">6</option>
                                        <option value="">7</option>
                                        <option value="">8</option>
                                        <option value="">9</option>
                                        <option value="">10</option>
                                        <option value="">11</option>
                                        <option value="">12</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="div_month2">
                                <label class="col-sm-2 control-label">结束年份</label>
                                <div class="col-sm-2">
                                    <select class="single-line form-control" name="endDate" >
                                        <option value="">2020</option>
                                        <option value="">2019</option>
                                        <option value="">2018</option>
                                        <option value="">2017</option>
                                        <option value="">2016</option>
                                    </select>
                                </div>
                                <label class="col-sm-2 control-label" for="endMonth">
                                    结束月份</label>

                                <div class="col-sm-2">
                                    <select class="form-control" name="endMonth" id="endMonth">
                                        <option value="">1</option>
                                        <option value="">2</option>
                                        <option value="">3</option>
                                        <option value="">4</option>
                                        <option value="">5</option>
                                        <option value="">6</option>
                                        <option value="">7</option>
                                        <option value="">8</option>
                                        <option value="">9</option>
                                        <option value="">10</option>
                                        <option value="">11</option>
                                        <option value="">12</option>
                                    </select>

                                </div>
                            </div>
                            <div class="form-group" id="div_year" style="display: none">
                                <label class="col-sm-2 control-label">开始年份</label>
                                <div class="col-sm-2">
                                    <select class="single-line form-control" name="beginDate" >
                                        <option value="">2020</option>
                                        <option value="">2019</option>
                                        <option value="">2018</option>
                                        <option value="">2017</option>
                                        <option value="">2016</option>
                                    </select>
                                </div>
                                <label class="col-sm-2 control-label">结束年份</label>
                                <div class="col-sm-2">
                                    <select class="single-line form-control" name="beginDate" >
                                        <option value="">2020</option>
                                        <option value="">2019</option>
                                        <option value="">2018</option>
                                        <option value="">2017</option>
                                        <option value="">2016</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-2 col-sm-offset-2">
                                    <button type="submit" class="btn btn-success">统计</button>
                                    <button type="reset" class="btn btn-white">取消</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div id="main" style="width: 900px;height: 400px;" class="col-sm-offset-2"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 全局js -->
<script src="../../static/js/jquery.min.js?v=2.1.4" th:src="@{/static/js/jquery.min.js(v='2.1.4')}"></script>
<script src="../../static/js/bootstrap.min.js?v=3.3.6" th:src="@{/static/js/bootstrap.min.js(v='3.3.6')}"></script>

<!-- 自定义js -->
<script src="../../static/js/content.js?v=1.0.0" th:src="@{/static/js/content.js(v='1.0.0')}"></script>

<!-- Peity -->
<script src="../../static/js/plugins/peity/jquery.peity.min.js" th:src="@{/static/js/plugins/peity/jquery.peity.min.js}"></script>

<!-- Peity -->
<!-- <script src="../../static/js/demo/peity-demo.js" th:src="@{/static/js/demo/peity-demo.js}"></script> -->


<!-- Data picker -->
<script src="../../static/js/plugins/datapicker/bootstrap-datepicker.js" th:src="@{/static/js/plugins/datapicker/bootstrap-datepicker.js}"></script>
<script src="../../static/js/plugins/datapicker/bootstrap-datepicker.zh-CN.min.js" th:src="@{/static/js/plugins/datapicker/bootstrap-datepicker.zh-CN.min.js}"></script>
<script src="../../static/js/plugins/echarts/echarts-all.js"></script>
<script type="text/javascript">
    $(function () {
        /*时间控件配置*/
        $('#myDate').datepicker({
            language: "zh-CN",
            clearBtn: true,//清除
            autoclose: true,
            todayHighlight: true,
            format: 'yyyy-mm-dd',
            todayBtn: false,//今日按钮
            startDate: '1970-1-1', //与你自己设置的格式一致yyyy-mm-dd，未设置的话与默认格式一致mm/dd/yyyy
            endDate: '2070-1-1'
        });
    });
</script>


<script>
    $(function () {
        // 图表初始化
        var chart = echarts.init(document.getElementById('main'));
        // 指定图表的配置项和数据
        var option = {
            title: {
                text: ''
            },
            tooltip: {},
            legend: {
                data:['新增',"流失"]
            },
            xAxis: {
                name:"新增",
                data: []  //["1月","2月","3月","4月","5月","6月"]
            },
            yAxis: {
                name:"人数"
            },
            series: [{
                name: '新增',
                type: 'bar',
                data: []    //[5, 20, 36, 10, 10, 20]
            },{
                    name: '流失',
                    type: 'bar',
                    data:[]     //data: [5, 20, 36, 10, 10, 20]
                }
            ]
        };

        $("#addForm").submit(function () {
            var datafile = "demo-data/membernum_month.json";
            if($(":radio[name=unit]:checked").val()==1) {
                datafile="demo-data/membernum_month.json";
            }else if($(":radio[name=unit]:checked").val()==2) {
                datafile="demo-data/membernum_season.json";
            }else if($(":radio[name=unit]:checked").val()==3){
                datafile="demo-data/membernum_year.json";
            }
            $.ajax({
                type:'GET',
                url:datafile,
                success:function (data) {
                    console.log(data);
                    option.title.text = data.title;
                    option.xAxis.data = data.time;
                    option.xAxis.name = data.xname;
                    option.series[0].data = data.data;
                    option.series[1].data = data.data2;
                    chart.setOption(option,true);
                }
            });
            return false;
        });

        // 选择不现统计单位时，改变选择框
        $(":radio[name=unit]").click(function(){
            if(this.value==1) {
                $("#div_month1").show();
                $("#div_month2").show();
                $("#div_year").hide();
            }else {
                $("#div_month1").hide();
                $("#div_month2").hide();
                $("#div_year").show();
            };
        });
    })


</script>


</body>

</html>
