<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kclm.xsap.dao.ScheduleRecordDao">

    <!-- 可根据自己的需求，是否要使用 -->
    <resultMap type="com.kclm.xsap.entity.ScheduleRecordEntity" id="scheduleRecordMap">
        <id property="id" column="id"/>
        <result property="courseId" column="course_id"/>
        <result property="teacherId" column="teacher_id"/>
        <result property="orderNums" column="order_nums"/>
        <result property="startDate" column="start_date"/>
        <result property="classTime" column="class_time"/>
        <result property="limitSex" column="limit_sex"/>
        <result property="limitAge" column="limit_age"/>
        <result property="createTime" column="create_time"/>
        <result property="lastModifyTime" column="last_modify_time"/>
        <result property="version" column="version"/>

        <association property="courseEntity" javaType="com.kclm.xsap.entity.CourseEntity">
            <id property="id" column="cid"/>
            <result property="name" column="cname"/>
            <result property="duration" column="cduration"/>
            <result property="contains" column="ccontains"/>
            <result property="color" column="ccolor"/>
            <result property="introduce" column="cintroduce"/>
            <result property="timesCost" column="ctimesCost"/>
            <result property="limitSex" column="climit_sex"/>
            <result property="limitAge" column="climit_age"/>
            <result property="limitCounts" column="climit_counts"/>
            <result property="createTime" column="ccreate_time"/>
            <result property="lastModifyTime" column="clast_modify_time"/>
            <result property="version" column="cversion"/>
        </association>
    </resultMap>
    <select id="selectSameDateSchedule" resultMap="scheduleRecordMap">
        select tsr.id,
               tsr.course_id,
               tsr.teacher_id,
               tsr.order_nums,
               tsr.start_date,
               tsr.class_time,
               tsr.limit_sex,
               tsr.limit_age,
               tsr.create_time,
               tsr.last_modify_time,
               tsr.version,
               tc.id               cid,
               tc.name             cname,
               tc.duration         cduration,
               tc.contains         ccontains,
               tc.color            ccolor,
               tc.introduce        cintroduce,
               tc.times_cost       ctimes_cost,
               tc.limit_sex        climit_sex,
               tc.limit_age        climit_age,
               tc.limit_counts     climit_counts,
               tc.create_time      ccreate_time,
               tc.last_modify_time clast_modify_time,
               tc.version          cversion
        from t_schedule_record tsr
                 left join t_course tc on tc.id = tsr.course_id
        where tsr.start_date = #{startDate};
    </select>


</mapper>